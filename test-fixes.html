<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠŸèƒ½æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: white;
            padding: 20px;
        }
        
        .test-container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            position: relative;
        }
        
        .fullscreen-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .fullscreen-btn svg {
            width: 20px;
            height: 20px;
            fill: white;
        }
        
        .test-container.fullscreen {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            max-width: none !important;
            border-radius: 0 !important;
            z-index: 9999 !important;
            margin: 0 !important;
        }
        
        .nav-links {
            margin: 20px 0;
        }
        
        .nav-links a {
            display: inline-block;
            margin: 5px 10px;
            padding: 10px 15px;
            background: rgba(79, 70, 229, 0.8);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .nav-links a:hover {
            background: rgba(79, 70, 229, 1);
            transform: translateY(-2px);
        }
        
        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }
        
        .error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
    </style>
</head>
<body>
    <div class="test-container" id="testContainer">
        <div class="fullscreen-btn" onclick="testToggleFullscreen()" id="fullscreenBtn" title="å…¨å±/é€€å‡ºå…¨å±">
            <svg id="fullscreenIcon" viewBox="0 0 24 24">
                <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
            </svg>
        </div>
        
        <h1>ğŸ”§ åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
        
        <div class="nav-links">
            <h3>ç®¡ç†é¡µé¢è·³è½¬æµ‹è¯•ï¼š</h3>
            <a href="#" onclick="testAdminAccess('admin-dashboard.html'); return false;">ğŸ› ï¸ ç³»ç»Ÿç®¡ç†</a>
            <a href="#" onclick="testAdminAccess('admin.html'); return false;">âš™ï¸ ç®¡ç†é¢æ¿</a>
            <a href="#" onclick="testAdminAccess('firecrawl-manager.html'); return false;">ğŸ”¥ çˆ¬å–ç®¡ç†</a>
            <a href="ai-config.html" target="_blank">ğŸ¤– AIé…ç½®</a>
        </div>
        
        <div id="testStatus" class="status">
            âœ… é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹æµ‹è¯•åŠŸèƒ½...
        </div>
        
        <div>
            <h3>æµ‹è¯•è¯´æ˜ï¼š</h3>
            <ul>
                <li>ç‚¹å‡»å³ä¸Šè§’æŒ‰é’®æµ‹è¯•å…¨å±åŠŸèƒ½</li>
                <li>ç‚¹å‡»ç®¡ç†é“¾æ¥æµ‹è¯•è·³è½¬ï¼ˆå¯†ç ï¼šadmin123ï¼‰</li>
                <li>æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„è°ƒè¯•ä¿¡æ¯</li>
            </ul>
        </div>
        
        <div>
            <h3>è°ƒè¯•ä¿¡æ¯ï¼š</h3>
            <div id="debugInfo" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto;">
                é¡µé¢åˆå§‹åŒ–ä¸­...
            </div>
        </div>
    </div>

    <script>
        let isFullscreen = false;
        let debugLog = [];
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            debugLog.push(logEntry);
            
            const debugDiv = document.getElementById('debugInfo');
            debugDiv.innerHTML = debugLog.slice(-10).join('<br>');
            debugDiv.scrollTop = debugDiv.scrollHeight;
            
            console.log(logEntry);
        }
        
        function testToggleFullscreen() {
            log('å…¨å±æŒ‰é’®è¢«ç‚¹å‡»');
            
            const container = document.getElementById('testContainer');
            const icon = document.getElementById('fullscreenIcon');
            const btn = document.getElementById('fullscreenBtn');
            
            if (!container || !icon) {
                log('âŒ é”™è¯¯ï¼šæ‰¾ä¸åˆ°å¿…è¦çš„å…ƒç´ ');
                return;
            }
            
            isFullscreen = !isFullscreen;
            log(`åˆ‡æ¢å…¨å±çŠ¶æ€: ${isFullscreen}`);
            
            if (isFullscreen) {
                container.classList.add('fullscreen');
                icon.innerHTML = '<path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>';
                btn.title = 'é€€å‡ºå…¨å±';
                log('âœ… è¿›å…¥å…¨å±æ¨¡å¼');
            } else {
                container.classList.remove('fullscreen');
                icon.innerHTML = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';
                btn.title = 'å…¨å±';
                log('âœ… é€€å‡ºå…¨å±æ¨¡å¼');
            }
        }
        
        function testAdminAccess(targetPage) {
            log(`å°è¯•è®¿é—®ç®¡ç†é¡µé¢: ${targetPage}`);
            
            // æ£€æŸ¥æ˜¯å¦å·²éªŒè¯
            const isAuthenticated = sessionStorage.getItem('admin_authenticated');
            
            if (isAuthenticated === 'true') {
                log('âœ… å·²éªŒè¯ï¼Œç›´æ¥è·³è½¬');
                window.open(targetPage, '_blank');
                return;
            }
            
            log('éœ€è¦éªŒè¯ç®¡ç†å‘˜å¯†ç ');
            
            // åˆ›å»ºç®€åŒ–çš„å¯†ç è¾“å…¥æ¡†
            const password = prompt('è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç :');
            
            if (password === 'admin123') {
                log('âœ… å¯†ç æ­£ç¡®ï¼Œä¿å­˜éªŒè¯çŠ¶æ€');
                sessionStorage.setItem('admin_authenticated', 'true');
                
                log(`æ­£åœ¨è·³è½¬åˆ°: ${targetPage}`);
                window.open(targetPage, '_blank');
                
                document.getElementById('testStatus').innerHTML = `âœ… éªŒè¯æˆåŠŸï¼æ­£åœ¨è·³è½¬åˆ° ${targetPage}`;
            } else if (password !== null) {
                log('âŒ å¯†ç é”™è¯¯');
                document.getElementById('testStatus').innerHTML = 'âŒ å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•';
                document.getElementById('testStatus').className = 'status error';
            } else {
                log('ç”¨æˆ·å–æ¶ˆäº†éªŒè¯');
            }
        }
        
        // ESCé”®é€€å‡ºå…¨å±
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && isFullscreen) {
                log('ESCé”®è¢«æŒ‰ä¸‹ï¼Œé€€å‡ºå…¨å±');
                testToggleFullscreen();
            }
        });
        
        // é¡µé¢åŠ è½½å®Œæˆ
        window.onload = function() {
            log('âœ… æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            log('å…¨å±æŒ‰é’®å…ƒç´ : ' + (document.getElementById('fullscreenBtn') ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'));
            log('å®¹å™¨å…ƒç´ : ' + (document.getElementById('testContainer') ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'));
        };
    </script>
</body>
</html>
