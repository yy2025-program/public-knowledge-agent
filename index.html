<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Knowledge Agent</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .chat-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 800px;
            height: 600px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .header {
            background: #4f46e5;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .api-status {
            padding: 10px;
            text-align: center;
            font-size: 12px;
            background: #f0f9ff;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .api-status.connected {
            background: #f0fdf4;
            color: #166534;
        }
        
        .api-status.disconnected {
            background: #fef2f2;
            color: #dc2626;
        }
        
        .chat-box {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8fafc;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 12px;
            max-width: 80%;
            word-wrap: break-word;
        }
        
        .user-message {
            background: #4f46e5;
            color: white;
            margin-left: auto;
        }
        
        .bot-message {
            background: white;
            border: 1px solid #e2e8f0;
            margin-right: auto;
        }
        
        .input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e2e8f0;
            display: flex;
            gap: 10px;
        }
        
        .input-area input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .input-area input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        
        .input-area button {
            padding: 12px 24px;
            background: #4f46e5;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }
        
        .input-area button:hover {
            background: #4338ca;
        }
        
        .input-area button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 10px;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="header">
            <h1>ğŸ¤– AI Knowledge Agent</h1>
            <p>åŸºäºç½‘é¡µçˆ¬å–çš„æ™ºèƒ½é—®ç­”åŠ©æ‰‹</p>
        </div>
        
        <div id="apiStatus" class="api-status">
            ğŸ”„ æ­£åœ¨æ£€æµ‹APIè¿æ¥çŠ¶æ€...
        </div>
        
        <div id="chatBox" class="chat-box">
            <div class="message bot-message">
                ğŸ‘‹ ä½ å¥½ï¼æˆ‘æ˜¯AIçŸ¥è¯†åŠ©æ‰‹ï¼Œå¯ä»¥å›ç­”åŸºäºçˆ¬å–ç½‘é¡µå†…å®¹çš„ä¸“ä¸šé—®é¢˜ã€‚è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ
            </div>
        </div>
        
        <div class="loading" id="loading">
            ğŸ¤” æ­£åœ¨æ€è€ƒä¸­...
        </div>
        
        <div class="input-area">
            <input type="text" id="questionInput" placeholder="è¾“å…¥æ‚¨çš„é—®é¢˜..." onkeypress="handleKeyPress(event)">
            <button onclick="askQuestion()" id="askButton">å‘é€</button>
        </div>
    </div>

    <script>
        // APIé…ç½® - ä½¿ç”¨JSONPlaceholderä½œä¸ºæ¨¡æ‹ŸAPI
        const API_BASE_URL = 'https://jsonplaceholder.typicode.com';
        let useRealAPI = true; // ä½¿ç”¨æ¨¡æ‹ŸAPI

        // æ£€æµ‹APIè¿æ¥çŠ¶æ€
        async function checkAPIStatus() {
            try {
                // æµ‹è¯•ç½‘ç»œè¿æ¥
                const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
                
                if (response.ok) {
                    useRealAPI = true;
                    updateAPIStatus('connected', 'âœ… ç½‘ç»œè¿æ¥æ­£å¸¸ - ä½¿ç”¨æœ¬åœ°æ™ºèƒ½é—®ç­”');
                } else {
                    throw new Error('ç½‘ç»œè¿æ¥å¼‚å¸¸');
                }
            } catch (error) {
                useRealAPI = false;
                updateAPIStatus('disconnected', 'âš ï¸ ç½‘ç»œè¿æ¥å¼‚å¸¸ - ä½¿ç”¨ç¦»çº¿æ¨¡å¼');
            }
        }

        function updateAPIStatus(status, message) {
            const statusElement = document.getElementById('apiStatus');
            statusElement.className = `api-status ${status}`;
            statusElement.textContent = message;
        }

        // å¢å¼ºçš„æœ¬åœ°çŸ¥è¯†åº“
        const enhancedKnowledge = {
            "äººå·¥æ™ºèƒ½": {
                content: "äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œè‡´åŠ›äºåˆ›å»ºèƒ½å¤Ÿæ‰§è¡Œé€šå¸¸éœ€è¦äººç±»æ™ºèƒ½çš„ä»»åŠ¡çš„ç³»ç»Ÿã€‚å®ƒåŒ…æ‹¬æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ã€è‡ªç„¶è¯­è¨€å¤„ç†ã€è®¡ç®—æœºè§†è§‰ç­‰å¤šä¸ªå­é¢†åŸŸã€‚AIçš„ç›®æ ‡æ˜¯è®©æœºå™¨èƒ½å¤Ÿç†è§£ã€å­¦ä¹ ã€æ¨ç†å’Œè§£å†³é—®é¢˜ã€‚",
                keywords: ["ai", "æ™ºèƒ½", "artificial", "äººå·¥æ™ºèƒ½"]
            },
            "æœºå™¨å­¦ä¹ ": {
                content: "æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªå­é›†ï¼Œå®ƒä½¿è®¡ç®—æœºèƒ½å¤Ÿåœ¨æ²¡æœ‰æ˜ç¡®ç¼–ç¨‹çš„æƒ…å†µä¸‹å­¦ä¹ å’Œæ”¹è¿›ã€‚é€šè¿‡ç®—æ³•åˆ†æå¤§é‡æ•°æ®ï¼Œè¯†åˆ«æ¨¡å¼ï¼Œå¹¶åšå‡ºé¢„æµ‹æˆ–å†³ç­–ã€‚ä¸»è¦åŒ…æ‹¬ç›‘ç£å­¦ä¹ ã€æ— ç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ ä¸‰ç§ç±»å‹ã€‚",
                keywords: ["å­¦ä¹ ", "ml", "machine learning", "ç®—æ³•", "æ•°æ®"]
            },
            "æ·±åº¦å­¦ä¹ ": {
                content: "æ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªå­é›†ï¼Œä½¿ç”¨å¤šå±‚ç¥ç»ç½‘ç»œæ¥æ¨¡æ‹Ÿäººè„‘çš„å·¥ä½œæ–¹å¼ã€‚å®ƒåœ¨å›¾åƒè¯†åˆ«ã€è¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰é¢†åŸŸè¡¨ç°å‡ºè‰²ã€‚æ·±åº¦å­¦ä¹ æ¨¡å‹èƒ½å¤Ÿè‡ªåŠ¨å­¦ä¹ æ•°æ®çš„å±‚æ¬¡åŒ–ç‰¹å¾è¡¨ç¤ºã€‚",
                keywords: ["æ·±åº¦", "ç¥ç»", "ç½‘ç»œ", "deep", "neural"]
            },
            "çˆ¬è™«": {
                content: "ç½‘ç»œçˆ¬è™«æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–ç¨‹åºï¼Œç”¨äºä»ç½‘ç«™æå–æ•°æ®ã€‚å®ƒå¯ä»¥ç³»ç»Ÿåœ°æµè§ˆç½‘é¡µï¼Œæ”¶é›†ä¿¡æ¯å¹¶å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œå¸¸ç”¨äºæ•°æ®æŒ–æ˜ã€ä»·æ ¼ç›‘æ§ã€å†…å®¹èšåˆç­‰åœºæ™¯ã€‚éœ€è¦éµå®ˆrobots.txtåè®®å’Œç½‘ç«™ä½¿ç”¨æ¡æ¬¾ã€‚",
                keywords: ["çˆ¬è™«", "spider", "crawl", "scrape", "æ•°æ®é‡‡é›†"]
            },
            "API": {
                content: "APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰æ˜¯ä¸åŒè½¯ä»¶åº”ç”¨ç¨‹åºä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ã€‚å®ƒå®šä¹‰äº†è¯·æ±‚å’Œå“åº”çš„æ ¼å¼ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿé›†æˆä¸åŒçš„æœåŠ¡å’ŒåŠŸèƒ½ã€‚å¸¸è§çš„APIç±»å‹åŒ…æ‹¬REST APIã€GraphQL APIç­‰ã€‚",
                keywords: ["api", "æ¥å£", "interface", "æœåŠ¡", "é›†æˆ"]
            },
            "FireCrawl": {
                content: "FireCrawlæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç½‘é¡µçˆ¬å–æœåŠ¡ï¼Œèƒ½å¤Ÿå¤„ç†JavaScriptæ¸²æŸ“çš„é¡µé¢ï¼Œæå–ç»“æ„åŒ–æ•°æ®ï¼Œå¹¶æ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼å¦‚Markdownå’ŒHTMLã€‚å®ƒæä¾›äº†æ¯”ä¼ ç»Ÿçˆ¬è™«æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ™ºèƒ½å†…å®¹æå–å’Œåçˆ¬è™«å¤„ç†ã€‚",
                keywords: ["firecrawl", "fire", "ç½‘é¡µçˆ¬å–", "javascript"]
            },
            "Supabase": {
                content: "Supabaseæ˜¯ä¸€ä¸ªå¼€æºçš„Firebaseæ›¿ä»£å“ï¼Œæä¾›å®æ—¶æ•°æ®åº“ã€èº«ä»½éªŒè¯ã€å­˜å‚¨ã€è¾¹ç¼˜å‡½æ•°ç­‰æœåŠ¡ã€‚å®ƒåŸºäºPostgreSQLï¼Œæä¾›äº†å¼ºå¤§çš„SQLåŠŸèƒ½ï¼Œç‰¹åˆ«é€‚åˆå¿«é€Ÿæ„å»ºç°ä»£Webåº”ç”¨ç¨‹åºã€‚",
                keywords: ["supabase", "æ•°æ®åº“", "database", "postgresql", "å®æ—¶"]
            },
            "GitHub": {
                content: "GitHubæ˜¯å…¨çƒæœ€å¤§çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼ŒåŸºäºGitç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚å®ƒä¸ä»…æä¾›ä»£ç å­˜å‚¨ï¼Œè¿˜åŒ…æ‹¬é¡¹ç›®ç®¡ç†ã€CI/CDã€åŒ…ç®¡ç†ç­‰åŠŸèƒ½ã€‚GitHub Pageså¯ä»¥å…è´¹æ‰˜ç®¡é™æ€ç½‘ç«™ã€‚",
                keywords: ["github", "git", "ä»£ç ", "ç‰ˆæœ¬æ§åˆ¶", "å¼€æº"]
            },
            "Vercel": {
                content: "Vercelæ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„å‰ç«¯éƒ¨ç½²å¹³å°ï¼Œä¸“é—¨ä¸ºReactã€Vueã€Next.jsç­‰æ¡†æ¶ä¼˜åŒ–ã€‚å®ƒæä¾›å…¨çƒCDNã€è‡ªåŠ¨HTTPSã€Serverlesså‡½æ•°ç­‰åŠŸèƒ½ï¼Œç‰¹åˆ«é€‚åˆéƒ¨ç½²é™æ€ç½‘ç«™å’Œå…¨æ ˆåº”ç”¨ã€‚",
                keywords: ["vercel", "éƒ¨ç½²", "serverless", "å‰ç«¯", "cdn"]
            }
        };

        async function askQuestion() {
            const questionInput = document.getElementById('questionInput');
            const question = questionInput.value.trim();
            
            if (!question) return;

            // ç¦ç”¨è¾“å…¥å’ŒæŒ‰é’®
            questionInput.disabled = true;
            document.getElementById('askButton').disabled = true;
            document.getElementById('loading').style.display = 'block';

            // æ˜¾ç¤ºç”¨æˆ·é—®é¢˜
            addMessage('user', question);
            questionInput.value = '';

            try {
                let answer;
                
                if (useRealAPI) {
                    // ä½¿ç”¨å¢å¼ºçš„æœ¬åœ°æ™ºèƒ½é—®ç­”
                    await new Promise(resolve => setTimeout(resolve, 800)); // æ¨¡æ‹Ÿæ€è€ƒæ—¶é—´
                    answer = generateSmartAnswer(question);
                } else {
                    // ç¦»çº¿æ¨¡å¼
                    await new Promise(resolve => setTimeout(resolve, 500));
                    answer = generateBasicAnswer(question);
                }
                
                addMessage('bot', answer);
                
            } catch (error) {
                addMessage('bot', 'æŠ±æ­‰ï¼ŒæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åå†è¯•ã€‚');
            } finally {
                // æ¢å¤è¾“å…¥çŠ¶æ€
                questionInput.disabled = false;
                document.getElementById('askButton').disabled = false;
                document.getElementById('loading').style.display = 'none';
                questionInput.focus();
            }
        }

        function addMessage(sender, message) {
            const chatBox = document.getElementById('chatBox');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            messageDiv.textContent = message;
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function generateSmartAnswer(question) {
            const questionLower = question.toLowerCase();
            let bestMatch = null;
            let maxScore = 0;

            // æ™ºèƒ½åŒ¹é…ç®—æ³•
            for (const [topic, data] of Object.entries(enhancedKnowledge)) {
                let score = 0;
                
                // ç²¾ç¡®åŒ¹é…
                if (question.includes(topic)) {
                    score += 10;
                }
                
                // å…³é”®è¯åŒ¹é…
                for (const keyword of data.keywords) {
                    if (questionLower.includes(keyword.toLowerCase())) {
                        score += 5;
                    }
                }
                
                // æ¨¡ç³ŠåŒ¹é…
                if (questionLower.includes(topic.toLowerCase())) {
                    score += 8;
                }
                
                if (score > maxScore) {
                    maxScore = score;
                    bestMatch = { topic, data, score };
                }
            }

            if (bestMatch && bestMatch.score >= 5) {
                return `å…³äº${bestMatch.topic}ï¼š\n\n${bestMatch.data.content}\n\nğŸ’¡ å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥è¯¢é—®å…¶ä»–æŠ€æœ¯è¯é¢˜ï¼`;
            }

            // æ™ºèƒ½æ¨è
            if (questionLower.includes('å¦‚ä½•') || questionLower.includes('æ€ä¹ˆ')) {
                return `å…³äº"${question}"çš„å®ç°æ–¹æ³•ï¼Œæˆ‘å»ºè®®æ‚¨å¯ä»¥ï¼š\n\n1. å…ˆäº†è§£ç›¸å…³çš„åŸºç¡€æ¦‚å¿µï¼ˆå¦‚äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ç­‰ï¼‰\n2. æŸ¥çœ‹ç›¸å…³çš„æŠ€æœ¯æ–‡æ¡£å’Œæ•™ç¨‹\n3. å®è·µåŠ¨æ‰‹é¡¹ç›®æ¥åŠ æ·±ç†è§£\n\næ‚¨å¯ä»¥é—®æˆ‘å…³äºäººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ã€çˆ¬è™«ã€APIã€FireCrawlã€Supabaseç­‰æŠ€æœ¯è¯é¢˜çš„å…·ä½“é—®é¢˜ï¼`;
            }

            if (questionLower.includes('ä»€ä¹ˆ') || questionLower.includes('æ˜¯ä»€ä¹ˆ')) {
                return `"${question}"æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼æˆ‘çš„çŸ¥è¯†åº“åŒ…å«ä»¥ä¸‹æŠ€æœ¯é¢†åŸŸçš„è¯¦ç»†ä¿¡æ¯ï¼š\n\nğŸ¤– äººå·¥æ™ºèƒ½ä¸æœºå™¨å­¦ä¹ \nğŸ•·ï¸ ç½‘ç»œçˆ¬è™«æŠ€æœ¯\nğŸ”— APIå¼€å‘ä¸é›†æˆ\nğŸ—„ï¸ æ•°æ®åº“ä¸äº‘æœåŠ¡\n\nè¯·å°è¯•è¯¢é—®è¿™äº›é¢†åŸŸçš„å…·ä½“é—®é¢˜ï¼Œæ¯”å¦‚"ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ "æˆ–"å¦‚ä½•ä½¿ç”¨API"ç­‰ã€‚`;
            }

            return `æ„Ÿè°¢æ‚¨çš„é—®é¢˜"${question}"ï¼è™½ç„¶æˆ‘æ²¡æœ‰æ‰¾åˆ°å®Œå…¨åŒ¹é…çš„ç­”æ¡ˆï¼Œä½†æˆ‘å¯ä»¥ä¸ºæ‚¨ä»‹ç»ç›¸å…³çš„æŠ€æœ¯æ¦‚å¿µã€‚\n\næˆ‘çš„ä¸“ä¸šé¢†åŸŸåŒ…æ‹¬ï¼š\nâ€¢ äººå·¥æ™ºèƒ½ä¸æœºå™¨å­¦ä¹ \nâ€¢ ç½‘ç»œçˆ¬è™«ä¸æ•°æ®é‡‡é›†\nâ€¢ APIå¼€å‘ä¸ç³»ç»Ÿé›†æˆ\nâ€¢ æ•°æ®åº“ä¸äº‘æœåŠ¡\n\nè¯·å°è¯•è¯¢é—®è¿™äº›é¢†åŸŸçš„å…·ä½“é—®é¢˜ï¼`;
        }

        function generateBasicAnswer(question) {
            return `æŠ±æ­‰ï¼Œå½“å‰å¤„äºç¦»çº¿æ¨¡å¼ï¼Œæ— æ³•æä¾›è¯¦ç»†å›ç­”ã€‚è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•ã€‚\n\næ‚¨çš„é—®é¢˜ï¼š"${question}"\n\nå»ºè®®æ‚¨ç¨åé‡æ–°è®¿é—®æœ¬é¡µé¢ï¼Œæˆ–è€…å°è¯•è¯¢é—®å…³äºäººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€APIç­‰æŠ€æœ¯è¯é¢˜çš„åŸºç¡€é—®é¢˜ã€‚`;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                askQuestion();
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.onload = function() {
            document.getElementById('questionInput').focus();
            checkAPIStatus();
        };
    </script>
</body>
</html>
